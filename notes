TESTS:
* armadillos, armadillos, armadillos
* Check fix: enemies digging while confused
* BasicFlee: test all cases
* Do slimes/zombies change direction after attacking the player?
* Do slimes/zombies change direction after water/tar?
* Can mages cast while stuck in tar?
* Cat+leaping+blademaster
* benchmark (type % 100) + offset[type / 100]

FEATURES:
* Ice
* Z3 digging
* Beetle armor
* Armored skeletons (attack direction!)
* Trampling

BUGFIXES:
* traps should be destroyed by bombs/elementals/moles
* bombs should deal damage even at point-blank
* moles can’t walk in water/tar
* knockback should set delay to n+1 for non-armored enemies
* knockback shouldn’t free enemies from tar/water

REFACTORS:
* Refactor harpy AI
* Consider renaming most AI functions

TIL:
* phasing makes wind/bomb gargoyles vanish, but not mine gargoyles
* when a shovemonster’s forced_move fails, it damages the player

REPORT:
* Different aggression mechanics in the level editor
* Elementals
* mine-gargoyles/crates + dagger throw

Harpy priority:
   N
  IFJ
 HDBDK
MEA.CGO
 IDBDL
  JFK
   N

metal doors try to close themselves before and after each player turn, except
on the first two turns they are open. This explains both the weird priority
thing and the fact that metal doors never close on the turn after opening, even
if there’s nothing in the way.

There is a fourth damage type besides regular, piercing, and phasing. I call it
“bomb-like”. Bomb-like damage always hurts blademasters, but doesn’t hurt other
armored enemies (beetles). Bomb-like damage never triggers warlock teleports.
The following sources deal bomb-like damage: bombs (duh), Boots of Lunging,
spike traps and all fireballs (traps, spells, scrolls and Red Dragons; didn’t
test it with DM)

↓↓....←←
↓↓....←←
........
...@....
←.......
↑↑....←←
↑↑....←←

blueblimp: I think the way it goes is, unless blocked or it would move
   the monster farther from you, basicseek prefers to keep using the same axis;
   and there is a special case saying that if the player's current or previous
   position, projected on the monster's line of movement, is the same as the
   monster's position, then the monster prefers to switch axis if it can

blueblimp: hm, there seems to be a special case where if the player moved more
   than 1 tile, then the player's previous position is ignored
