TESTS:
* Edge cases of bomb/nightmare/revealed aggro

FEATURES:
* chests!!!
* metal doors (type=111)
* lord enemies
* requeue enemies when close to enemies of the same priority
* recursive requeueing

BUGFIXES:
* beetle shedding isn’t quite right
* shovemonsters pushing the player on ice shoud trigger a slide
* when monkeyed while untrapped in tar, the player should stay untrapped
* charged breath attacks should have extreme priority
* skeleton knights should take two stacks of damage from fire traps
* monkey should tank explosions/fireballs for the player
* clonking should hit both player and monkey
* the `knocked` flag should be reset during the player’s turn
* bombs shouldn’t damage unaggroed enemies
* pixie explosions shouldn’t change terrain or destroy phasing enemies (but still destroy traps/walls)
* non-player damage on Goolem shouldn’t spawn ooze

REFACTORS:
* Refactor harpy AI
* Don’t rely on qsort being stable

Metal doors try to close themselves before and after each player turn, except
on the first two turns they are open. This explains both the weird priority
thing and the fact that metal doors never close on the turn after opening, even
if there’s nothing in the way.
