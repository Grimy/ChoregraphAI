TESTS:
* Edge cases of bomb/nightmare/revealed aggro
* Monkey+tar interactions (get monkeyed while untrapped in tar…)
* Is prev_pos updated while monkeyed?
* Goblin bomber + bounce trap + blue dragon
* Check that ice still works
* Double-fireball a rider
* Are lord monkeys/assassins knocked back on hit?
* Do monkeys protect from freeze?
* forced_move while monkeyed
* Fireball ghost-SK on top of another monster

FEATURES:
* metal doors (type=111)
* green bats
* lord enemies
* requeue enemies when close to enemies of the same priority

BUGFIXES:
* monkey should tank explosions/fireballs for the player
* clonking should hit both player and monkey
* the `knocked` flag should be reset during the player’s turn
* requeueing should be recursive and in normal priority order
* bombs shouldn’t damage unaggroed enemies
* pixie explosions shouldn’t change terrain or destroy phasing enemies (but still destroy traps/walls)
* non-player damage on Goolem shouldn’t spawn ooze

REFACTORS:
* Refactor harpy AI
* Dragon exhaustion is implemented in a stupid way

Metal doors try to close themselves before and after each player turn, except
on the first two turns they are open. This explains both the weird priority
thing and the fact that metal doors never close on the turn after opening, even
if there’s nothing in the way.
